

@model IEnumerable<project5_voting.Models.LocalCandidatesGroupedViewModel>

@{
    ViewBag.Title = "Local Voting";
}

<h2>Local Voting</h2>
@using (Html.BeginForm())
{
    foreach (var group in Model)
    {
        <div class="card mb-3" id="card-@group.ListName">
            <div class="card-header">
                <h5>@group.ListName</h5>
            </div>
            <div class="card-body">
                <input type="radio" name="selectedList" value="@group.ListName" id="list-@group.ListName"
                       onclick="handleRadioClick('@group.ListName')" />
                <label for="list-@group.ListName">Select this @group.ListName</label><br />

                @foreach (var candidate in group.Candidates)
                {
                    <div class="form-check">
                        <input class="form-check-input" type="checkbox" id="candidate-@candidate.id"
                               name="selectedCandidates" value="@candidate.id" disabled />
                        <label class="form-check-label" for="candidate-@candidate.id">
                            @candidate.candidateName
                        </label>
                    </div>
                }
            </div>
        </div>
    }
    <button type="submit" class="btn btn-primary">Submit</button>
}

<script>
    function handleRadioClick(selectedListName) {
        // Get all card elements
        var cards = document.querySelectorAll('.card');

        // Iterate through all cards
        cards.forEach(function (card) {
            // Get the list name for the current card
            var cardListName = card.id.replace('card-', '');

            // Get all checkboxes within the card
            var checkboxes = card.querySelectorAll('input[type="checkbox"]');

            if (cardListName === selectedListName) {
                // Enable checkboxes if this card's listName matches the selected list
                checkboxes.forEach(function (checkbox) {
                    checkbox.disabled = false;
                });
            } else {
                // Disable checkboxes for all other cards
                checkboxes.forEach(function (checkbox) {
                    checkbox.disabled = true;
                });
            }
        });
    }
</script>

